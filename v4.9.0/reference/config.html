<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Config - Clair Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Documentation for Clair.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon-de23e50b.svg">
        <link rel="shortcut icon" href="../favicon-8114d1fc.png">
        <link rel="stylesheet" href="../css/variables-8adf115d.css">
        <link rel="stylesheet" href="../css/general-2459343d.css">
        <link rel="stylesheet" href="../css/chrome-ae938929.css">
        <link rel="stylesheet" href="../css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="../highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="../tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="../ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "coal";
            window.path_to_searchindex_js = "../searchindex-4a0fbf53.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc-27196b94.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">Clair Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/quay/clair" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="config"><a class="header" href="#config">Config</a></h1>
<h2 id="cli-flags-and-environment-variables"><a class="header" href="#cli-flags-and-environment-variables">CLI Flags And Environment Variables</a></h2>
<p>Clair is configured by a structured yaml or JSON<sup class="footnote-reference" id="fr-1-1"><a href="#footnote-1">1</a></sup> file and an optional directory of “merge” and “patch” documents<sup class="footnote-reference" id="fr-1-2"><a href="#footnote-1">1</a></sup>.
Each Clair node needs to specify what mode it will run in and a path to a configuration file via CLI flags or environment variables.</p>
<p>For example:</p>
<pre><code class="language-shell">$ clair -conf ./path/to/config.yaml -mode indexer
$ clair -conf ./path/to/config.yaml -mode matcher
</code></pre>
<pre><code>-mode 
    (also specified by CLAIR_MODE env variable)
    One of the following strings
    Sets which mode the clair instances will run in
    
    "indexer": runs just the indexer node
    "matcher": runs just the matcher node
    "notifier": runs just the notifier node
    "combo": will run all services on the same node.
-conf
    (also specified by CLAIR_CONF env variable)
    A file system path to Clair's config file
</code></pre>
<p>The above example starts two Clair nodes using the same configuration.
One will only run the indexing facilities while the other will only run the matching facilities.</p>
<p>Environment variables respected by the Go standard library can be specified
if needed. Some notable examples:</p>
<ul>
<li><code>HTTP_PROXY</code></li>
<li><code>HTTPS_PROXY</code></li>
<li><code>SSL_CERT_DIR</code></li>
</ul>
<p>If running in “combo” mode you <strong>must</strong> supply the <code>indexer</code>, <code>matcher</code>,
and <code>notifier</code> configuration blocks in the configuration.</p>
<h2 id="configuration-dropins"><a class="header" href="#configuration-dropins">Configuration dropins</a></h2>
<p>Starting in Clair version <code>4.7.0</code>, dropin configuration files are supported.</p>
<p>Given a root configurtaion file of <code>/etc/clair/config.json</code>, all files matching the globs <code>/etc/clair/config.json.d/*.json</code> and <code>/etc/clair/config.json.d/*.json-patch</code> would be loaded in lexical order after the root configuration file.
Similarly, given <code>/etc/clair/config.yaml</code>, all files matching the globs <code>/etc/clair/config.yaml.d/*.yaml</code> and <code>/etc/clair/config.yaml.d/*.yaml-patch</code> would be loaded.
Only the extensions <code>yaml</code> and <code>json</code> are supported, and indicate yaml and JSON formatting, respectively.</p>
<p>The dropin files must have the same extension and format as the root file.
Dropins with the bare suffix are treated as <a href="rfc7386">merge documents</a>.
Dropins with the <code>-patch</code> suffix are treated as <a href="rfc6902">patch documents</a> and must contain a valid <a href="rfc6902">RFC 6902</a> structure.
Yaml documents must be resolvable to the JSON subset.</p>
<p>Take care with the <a href="rfc7386">merge</a> behavior around lists; a patch operation may be more suitable.
The <code>clairctl check-config</code> command can be used to ensure a merged configuration is what is intended.
In addition, placing <code>test</code> operations in a patch file that’s evaluated last (such as <code>zz-validate.json-patch</code>) can be used to have Clair refuse to start if some configuration values are not what is intended.</p>
<p>The application defaults are applied <em>after</em> the configuration is loaded and as such, not reflected in the <code>clairctl check-config</code> command.
The output of that command is also not currently suitable to be used to “compile” a config to a single file.</p>
<h2 id="deprecations-and-changes"><a class="header" href="#deprecations-and-changes">Deprecations and Changes</a></h2>
<p>Starting in version <code>4.7.0</code>, unknown keys are disallowed.
Configurations that looked valid previously and loaded fine may now cause Clair to refuse to start.</p>
<p>In version <code>4.8.0</code>, using Jaeger for trace submission was deprecated.
Configurations that use Jaeger will print a warning.
In future versions, using the Jaeger format may cause an error.</p>
<h2 id="configuration-reference"><a class="header" href="#configuration-reference">Configuration Reference</a></h2>
<p>Please see the <a href="https://pkg.go.dev/github.com/quay/clair/config">go module documentation</a> for additional documentation on defaults and use.</p>
<pre><code>http_listen_addr: ""
introspection_addr: ""
log_level: ""
tls: {}
indexer:
    connstring: ""
    scanlock_retry: 0
    layer_scan_concurrency: 0
    migrations: false
    scanner: {}
    airgap: false
matcher:
    connstring: ""
    indexer_addr: ""
    migrations: false
    period: ""
    disable_updaters: false
    update_retention: 2
matchers:
    names: nil
    config: nil
updaters:
    sets: nil
    config: nil
notifier:
    connstring: ""
    migrations: false
    indexer_addr: ""
    matcher_addr: ""
    poll_interval: ""
    delivery_interval: ""
    disable_summary: false
    webhook: null
    amqp: null
    stomp: null
auth: 
  psk: nil
trace:
    name: ""
    probability: null
    jaeger:
        agent:
            endpoint: ""
        collector:
            endpoint: ""
            username: null
            password: null
        service_name: ""
        tags: nil
        buffer_max: 0
    otlp:
	  http: {}
      grpc: {}
metrics:
    name: ""
    prometheus:
        endpoint: null
</code></pre>
<p>Note: the above just lists every key for completeness. Copy-pasting the above as
a starting point for configuration will result in some options not having their
defaults set normally.</p>
<!---
The following are purposefully omitted. See comments in the config package for
more information.

# `$.tls.root_ca`
# `$.updaters.filter`
# `$.notifier.webhook.signed`
# `$.auth.keyserver`
# `$.auth.keyserver.api`
# `$.auth.keyserver.intraservice`
# `$.trace.otlp.http.client_tls`
# `$.trace.otlp.http.client_tls.root_ca`
# `$.trace.otlp.grpc.client_tls`
# `$.trace.otlp.grpc.client_tls.root_ca`
# `$.metrics.otlp.http.client_tls`
# `$.metrics.otlp.http.client_tls.root_ca`
# `$.metrics.otlp.grpc.client_tls`
# `$.metrics.otlp.grpc.client_tls.root_ca`
-->
<h3 id="http_listen_addr"><a class="header" href="#http_listen_addr"><code>$.http_listen_addr</code></a></h3>
<p>A string in <code>&lt;host&gt;:&lt;port&gt;</code> format where <code>&lt;host&gt;</code> can be an empty string.</p>
<p>This configures where the HTTP API is exposed.
See <code>/openapi/v1</code> for the API spec.</p>
<h3 id="introspection_addr"><a class="header" href="#introspection_addr"><code>$.introspection_addr</code></a></h3>
<p>A string in <code>&lt;host&gt;:&lt;port&gt;</code> format where <code>&lt;host&gt;</code> can be an empty string.</p>
<p>This configures where Clair’s metrics and health endpoints are exposed.</p>
<h3 id="log_level"><a class="header" href="#log_level"><code>$.log_level</code></a></h3>
<p>Set the logging level.</p>
<p>One of the following strings:</p>
<ul>
<li>debug-color</li>
<li>debug</li>
<li>info</li>
<li>warn</li>
<li>error</li>
<li>fatal</li>
<li>panic</li>
</ul>
<h3 id="tls"><a class="header" href="#tls"><code>$.tls</code></a></h3>
<p>TLS is a map containing the config for serving the HTTP API over TLS (and
HTTP/2).</p>
<h4 id="tlscert"><a class="header" href="#tlscert"><code>$.tls.cert</code></a></h4>
<p>The TLS certificate to be used. Must be a full-chain certificate, as in nginx.</p>
<h4 id="tlskey"><a class="header" href="#tlskey"><code>$.tls.key</code></a></h4>
<p>A key file for the TLS certificate. Encryption is not supported on the key.</p>
<h3 id="indexer"><a class="header" href="#indexer"><code>$.indexer</code></a></h3>
<p>Indexer provides Clair Indexer node configuration.</p>
<h4 id="indexerairgap"><a class="header" href="#indexerairgap"><code>$.indexer.airgap</code></a></h4>
<p>Disables HTTP access to the Internet for indexers and fetchers.
Private IPv4 and IPv6 addresses are allowed.
Database connections are unaffected.</p>
<h4 id="indexerconnstring"><a class="header" href="#indexerconnstring"><code>$.indexer.connstring</code></a></h4>
<p>A Postgres connection string.</p>
<p>Accepts a format as a url (e.g.,
<code>postgres://pqgotest:password@localhost/pqgotest?sslmode=verify-full</code>)
or a libpq connection string (e.g.,
<code>user=pqgotest dbname=pqgotest sslmode=verify-full</code>).</p>
<h4 id="indexerindex_report_request_concurrency"><a class="header" href="#indexerindex_report_request_concurrency"><code>$.indexer.index_report_request_concurrency</code></a></h4>
<p>Integer.</p>
<p>Rate limits the number of index report creation requests.</p>
<p>Setting this to 0 will attempt to auto-size this value. Setting a negative value
means “unlimited.” The auto-sizing is a multiple of the number of available
cores.</p>
<p>The API will return a 429 status code if concurrency is exceeded.</p>
<h4 id="indexerscanlock_retry"><a class="header" href="#indexerscanlock_retry"><code>$.indexer.scanlock_retry</code></a></h4>
<p>A positive integer representing seconds.</p>
<p>Concurrent Indexers lock on manifest scans to avoid clobbering.
This value tunes how often a waiting Indexer will poll for the lock.</p>
<!--TODO: Move to async operating mode -->
<h4 id="indexerlayer_scan_concurrency"><a class="header" href="#indexerlayer_scan_concurrency"><code>$.indexer.layer_scan_concurrency</code></a></h4>
<p>Positive integer limiting the number of concurrent layer scans.</p>
<p>Indexers will index a Manifest’s layers concurrently.
This value tunes the number of layers an Indexer will scan in parallel.</p>
<h4 id="indexermigrations"><a class="header" href="#indexermigrations"><code>$.indexer.migrations</code></a></h4>
<p>A boolean value.</p>
<p>Whether Indexer nodes handle migrations to their database.</p>
<h4 id="indexerscanner"><a class="header" href="#indexerscanner"><code>$.indexer.scanner</code></a></h4>
<p>Indexer configurations.</p>
<p>Scanner allows for passing configuration options to layer scanners.
The scanner will have this configuration passed to it on construction if
designed to do so.</p>
<h4 id="indexerscannerdist"><a class="header" href="#indexerscannerdist"><code>$.indexer.scanner.dist</code></a></h4>
<p>A map with the name of a particular scanner and arbitrary yaml as a value.</p>
<h4 id="indexerscannerpackage"><a class="header" href="#indexerscannerpackage"><code>$.indexer.scanner.package</code></a></h4>
<p>A map with the name of a particular scanner and arbitrary yaml as a value.</p>
<h4 id="indexerscannerrepo"><a class="header" href="#indexerscannerrepo"><code>$.indexer.scanner.repo</code></a></h4>
<p>A map with the name of a particular scanner and arbitrary yaml as a value.</p>
<h3 id="matcher"><a class="header" href="#matcher"><code>$.matcher</code></a></h3>
<p>Matcher provides Clair matcher node configuration.</p>
<h4 id="matchercache_age"><a class="header" href="#matchercache_age"><code>$.matcher.cache_age</code></a></h4>
<p>Duration string.</p>
<p>Controls how long clients should be hinted to cache responses for.</p>
<h4 id="matcherconnstring"><a class="header" href="#matcherconnstring"><code>$.matcher.connstring</code></a></h4>
<p>A Postgres connection string.</p>
<p>Accepts a format as a url (e.g.,
<code>postgres://pqgotest:password@localhost/pqgotest?sslmode=verify-full</code>)
or a libpq connection string (e.g.,
<code>user=pqgotest dbname=pqgotest sslmode=verify-full</code>).</p>
<h4 id="matchermax_conn_pool"><a class="header" href="#matchermax_conn_pool"><code>$.matcher.max_conn_pool</code></a></h4>
<p>A positive integer limiting the database connection pool size.</p>
<p>Clair allows for a custom connection pool size.
This number will directly set how many active database
connections are allowed concurrently.</p>
<p>This parameter will be ignored in a future version.
Users should configure this through the connection string.</p>
<h4 id="matcherindexer_addr"><a class="header" href="#matcherindexer_addr"><code>$.matcher.indexer_addr</code></a></h4>
<p>A string in <code>&lt;host&gt;:&lt;port&gt;</code> format where <code>&lt;host&gt;</code> can be an empty string.</p>
<p>A Matcher contacts an Indexer to create a VulnerabilityReport.
The location of this Indexer is required.</p>
<h4 id="matchermigrations"><a class="header" href="#matchermigrations"><code>$.matcher.migrations</code></a></h4>
<p>A boolean value.</p>
<p>Whether Matcher nodes handle migrations to their databases.</p>
<h4 id="matcherperiod"><a class="header" href="#matcherperiod"><code>$.matcher.period</code></a></h4>
<p>A time.ParseDuration parseable string.</p>
<p>Determines how often updates for new security advisories will take place.</p>
<p>Defaults to 6 hours.</p>
<h4 id="matcherdisable_updaters"><a class="header" href="#matcherdisable_updaters"><code>$.matcher.disable_updaters</code></a></h4>
<p>A boolean value.</p>
<p>Whether to run background updates or not.</p>
<h4 id="matcherdisable_enrichment"><a class="header" href="#matcherdisable_enrichment"><code>$.matcher.disable_enrichment</code></a></h4>
<p>A boolean value.</p>
<p>Whether to enrich the returned vulnerabilities or not.</p>
<h4 id="matcherupdate_retention"><a class="header" href="#matcherupdate_retention"><code>$.matcher.update_retention</code></a></h4>
<p>An integer value limiting the number of update operations kept in the database.</p>
<p>Sets the number of update operations to retain between garbage collection
cycles. This should be set to a safe MAX value based on database size
constraints.</p>
<p>Defaults to 10.</p>
<p>If a value less than 0 is provided, GC is disabled. 2 is the minimum value to
ensure updates can be compared for notifications.</p>
<h3 id="matchers"><a class="header" href="#matchers"><code>$.matchers</code></a></h3>
<p>Matchers provides configuration for the in-tree Matchers and RemoteMatchers.</p>
<h4 id="matchersnames"><a class="header" href="#matchersnames"><code>$.matchers.names</code></a></h4>
<p>A list of string values informing the matcher factory about enabled matchers.</p>
<p>If the value is nil the default list of Matchers will run:</p>
<ul>
<li>alpine-matcher</li>
<li>aws-matcher</li>
<li>debian-matcher</li>
<li>gobin</li>
<li>java-maven</li>
<li>oracle</li>
<li>photon</li>
<li>python</li>
<li>rhel</li>
<li>rhel-container-matcher</li>
<li>suse</li>
<li>ubuntu-matcher</li>
</ul>
<p>If an empty list is provided zero matchers will run.</p>
<h4 id="matchersconfig"><a class="header" href="#matchersconfig"><code>$.matchers.config</code></a></h4>
<p>Provides configuration to specific matcher.</p>
<p>A map keyed by the name of the matcher containing a sub-object which
will be provided to the matchers factory constructor.</p>
<p>A hypothetical example:</p>
<pre><code>config:
  python:
    ignore_vulns:
      - CVE-XYZ
      - CVE-ABC
</code></pre>
<h3 id="updaters"><a class="header" href="#updaters"><code>$.updaters</code></a></h3>
<p>Updaters provides configuration for the Matcher’s update manager.</p>
<h4 id="updaterssets"><a class="header" href="#updaterssets"><code>$.updaters.sets</code></a></h4>
<p>A list of string values informing the update manager which Updaters to run.</p>
<p>If the value is nil (or <code>null</code> in yaml) the default set of Updaters will run:</p>
<ul>
<li>alpine</li>
<li>aws</li>
<li>debian</li>
<li>oracle</li>
<li>osv</li>
<li>photon</li>
<li>rhcc</li>
<li>rhel</li>
<li>suse</li>
<li>ubuntu</li>
</ul>
<p>If an empty list is provided zero updaters will run.</p>
<h4 id="updatersconfig"><a class="header" href="#updatersconfig"><code>$.updaters.config</code></a></h4>
<p>Provides configuration to specific updater sets.</p>
<p>A map keyed by the name of the updater set name containing a sub-object
which will be provided to the updater set’s constructor.</p>
<p>A hypothetical example:</p>
<pre><code>config:
  ubuntu:
    security_tracker_url: http://security.url
    ignore_distributions: 
      - cosmic
</code></pre>
<h3 id="notifier"><a class="header" href="#notifier"><code>$.notifier</code></a></h3>
<p>Notifier provides Clair notifier node configuration.</p>
<h4 id="notifierconnstring"><a class="header" href="#notifierconnstring"><code>$.notifier.connstring</code></a></h4>
<p>A Postgres connection string.</p>
<p>Accepts a format as a url (e.g.,
<code>postgres://pqgotest:password@localhost/pqgotest?sslmode=verify-full</code>)
or a libpq connection string (e.g.,
<code>user=pqgotest dbname=pqgotest sslmode=verify-full</code>).</p>
<h4 id="notifiermigrations"><a class="header" href="#notifiermigrations"><code>$.notifier.migrations</code></a></h4>
<p>A boolean value.</p>
<p>Whether Notifier nodes handle migrations to their database.</p>
<h4 id="notifierindexer_addr"><a class="header" href="#notifierindexer_addr"><code>$.notifier.indexer_addr</code></a></h4>
<p>A string in <code>&lt;host&gt;:&lt;port&gt;</code> format where <code>&lt;host&gt;</code> can be an empty string.</p>
<p>A Notifier contacts an Indexer to create obtain manifests affected by
vulnerabilities. The location of this Indexer is required.</p>
<h4 id="notifiermatcher_addr"><a class="header" href="#notifiermatcher_addr"><code>$.notifier.matcher_addr</code></a></h4>
<p>A string in <code>&lt;host&gt;:&lt;port&gt;</code> format where <code>&lt;host&gt;</code> can be an empty string.</p>
<p>A Notifier contacts a Matcher to list update operations and acquire diffs.
The location of this Indexer is required.</p>
<h4 id="notifierpoll_interval"><a class="header" href="#notifierpoll_interval"><code>$.notifier.poll_interval</code></a></h4>
<p>A time.ParseDuration parsable string.</p>
<p>The frequency at which the notifier will query at Matcher for Update Operations.</p>
<h4 id="notifierdelivery_interval"><a class="header" href="#notifierdelivery_interval"><code>$.notifier.delivery_interval</code></a></h4>
<p>A time.ParseDuration parsable string.</p>
<p>The frequency at which the notifier attempt delivery of created or previously
failed notifications.</p>
<h4 id="notifierdisable_summary"><a class="header" href="#notifierdisable_summary"><code>$.notifier.disable_summary</code></a></h4>
<p>A boolean.</p>
<p>Controls whether notifications should be summarized to one per manifest or not.</p>
<h4 id="notifierwebhook"><a class="header" href="#notifierwebhook"><code>$.notifier.webhook</code></a></h4>
<p>Configures the notifier for webhook delivery.</p>
<h4 id="notifierwebhooktarget"><a class="header" href="#notifierwebhooktarget"><code>$.notifier.webhook.target</code></a></h4>
<p>URL where the webhook will be delivered.</p>
<h4 id="notifierwebhookcallback"><a class="header" href="#notifierwebhookcallback"><code>$.notifier.webhook.callback</code></a></h4>
<p>The callback url where notifications can be retrieved.
The notification ID will be appended to this url.</p>
<p>This will typically be where the clair notifier is hosted.</p>
<h4 id="notifierwebhookheaders"><a class="header" href="#notifierwebhookheaders"><code>$.notifier.webhook.headers</code></a></h4>
<p>A map associating a header name to a list of values.</p>
<h4 id="notifieramqp"><a class="header" href="#notifieramqp"><code>$.notifier.amqp</code></a></h4>
<p>Configures the notifier for AMQP delivery.</p>
<p>Note: Clair does not declare any AMQP components on its own.  All attempts
to use an exchange or queue are passive only and will fail The broker
administrators should setup exchanges and queues ahead of time.</p>
<h4 id="notifieramqpdirect"><a class="header" href="#notifieramqpdirect"><code>$.notifier.amqp.direct</code></a></h4>
<p>A boolean value.</p>
<p>If true the Notifier will deliver individual notifications (not a callback)
to the configured AMQP broker.</p>
<h4 id="notifieramqprollup"><a class="header" href="#notifieramqprollup"><code>$.notifier.amqp.rollup</code></a></h4>
<p>Integer 0 or greater.</p>
<p>If <code>direct</code> is true this value will inform notifier how many notifications
to send in a single direct delivery.  For example, if <code>direct</code> is set to
<code>true</code> and <code>rollup</code> is set to <code>5</code>, the notifier will deliver no more then
5 notifications in a single json payload to the broker. Setting the value
to 0 will effectively set it to 1.</p>
<h4 id="notifieramqpexchange"><a class="header" href="#notifieramqpexchange"><code>$.notifier.amqp.exchange</code></a></h4>
<p>The AMQP Exchange to connect to.</p>
<h4 id="notifieramqpexchangename"><a class="header" href="#notifieramqpexchangename"><code>$.notifier.amqp.exchange.name</code></a></h4>
<p>string value</p>
<p>The name of the exchange to connect to.</p>
<h4 id="notifieramqpexchangetype"><a class="header" href="#notifieramqpexchangetype"><code>$.notifier.amqp.exchange.type</code></a></h4>
<p>string value</p>
<p>The type of the exchange. Typically:</p>
<ul>
<li>direct</li>
<li>fanout</li>
<li>topic</li>
<li>headers</li>
</ul>
<h4 id="notifieramqpexchangedurability"><a class="header" href="#notifieramqpexchangedurability"><code>$.notifier.amqp.exchange.durability</code></a></h4>
<p>bool value</p>
<p>Whether the configured queue is durable or not.</p>
<h4 id="notifieramqpexchangeauto_delete"><a class="header" href="#notifieramqpexchangeauto_delete"><code>$.notifier.amqp.exchange.auto_delete</code></a></h4>
<p>bool value</p>
<p>Whether the configured queue uses an auto_delete policy.</p>
<h4 id="notifieramqprouting_key"><a class="header" href="#notifieramqprouting_key"><code>$.notifier.amqp.routing_key</code></a></h4>
<p>string value</p>
<p>The name of the routing key each notification will be sent with.</p>
<h4 id="notifieramqpcallback"><a class="header" href="#notifieramqpcallback"><code>$.notifier.amqp.callback</code></a></h4>
<p>a URL string</p>
<p>If <code>direct</code> is <code>false</code>, this URL is provided in the notification callback sent
to the broker. This URL should point to Clair’s notification API endpoint.</p>
<h4 id="notifieramqpuris"><a class="header" href="#notifieramqpuris"><code>$.notifier.amqp.uris</code></a></h4>
<p>list of URL strings</p>
<p>A list of one or more AMQP brokers to connect to, in priority order.</p>
<h4 id="notifieramqptls"><a class="header" href="#notifieramqptls"><code>$.notifier.amqp.tls</code></a></h4>
<p>Configures TLS connection to AMQP broker.</p>
<h4 id="notifieramqptlsroot_ca"><a class="header" href="#notifieramqptlsroot_ca"><code>$.notifier.amqp.tls.root_ca</code></a></h4>
<p>string value</p>
<p>The filesystem path where a root CA can be read.</p>
<h4 id="notifieramqptlscert"><a class="header" href="#notifieramqptlscert"><code>$.notifier.amqp.tls.cert</code></a></h4>
<p>string value</p>
<p>The filesystem path where a tls certificate can be read. Note that clair
also respects <code>SSL_CERT_DIR</code>, as documented for the Go <code>crypto/x509</code> package.</p>
<h4 id="notifieramqptlskey"><a class="header" href="#notifieramqptlskey"><code>$.notifier.amqp.tls.key</code></a></h4>
<p>string value</p>
<p>The filesystem path where a TLS private key can be read.</p>
<h4 id="notifierstomp"><a class="header" href="#notifierstomp"><code>$.notifier.stomp</code></a></h4>
<p>Configures the notifier for STOMP delivery.</p>
<h4 id="notifierstompdirect"><a class="header" href="#notifierstompdirect"><code>$.notifier.stomp.direct</code></a></h4>
<p>A boolean value.</p>
<p>If <code>true</code>, the Notifier will deliver individual notifications (not a
callback) to the configured STOMP broker.</p>
<h4 id="notifierstomprollup"><a class="header" href="#notifierstomprollup"><code>$.notifier.stomp.rollup</code></a></h4>
<p>Integer 0 or greater.</p>
<p>If <code>direct</code> is <code>true</code>, this value will limit the number of notifications
sent in a single direct delivery.  For example, if <code>direct</code> is set to
<code>true</code> and <code>rollup</code> is set to <code>5</code>, the notifier will deliver no more
then 5 notifications in a single json payload to the broker. Setting the value
to 0 will effectively set it to 1.</p>
<h4 id="notifierstompcallback"><a class="header" href="#notifierstompcallback"><code>$.notifier.stomp.callback</code></a></h4>
<p>a URL string</p>
<p>If <code>direct</code> is <code>false</code>, this URL is provided in the notification callback sent
to the broker. This URL should point to Clair’s notification API endpoint.</p>
<h4 id="notifierstompdestination"><a class="header" href="#notifierstompdestination"><code>$.notifier.stomp.destination</code></a></h4>
<p>a string value</p>
<p>The STOMP destination to deliver notifications to.</p>
<h4 id="notifierstompuris"><a class="header" href="#notifierstompuris"><code>$.notifier.stomp.uris</code></a></h4>
<p>list of URL strings</p>
<p>A list of one or more STOMP brokers to connect to in priority order.</p>
<h4 id="notifierstomptls"><a class="header" href="#notifierstomptls"><code>$.notifier.stomp.tls</code></a></h4>
<p>Configures TLS connection to STOMP broker.</p>
<h4 id="notifierstomptlsroot_ca"><a class="header" href="#notifierstomptlsroot_ca"><code>$.notifier.stomp.tls.root_ca</code></a></h4>
<p>string value</p>
<p>The filesystem path where a root CA can be read.
Note that clair also respects <code>SSL_CERT_DIR</code>, as documented for the Go
<code>crypto/x509</code> package.</p>
<h4 id="notifierstomptlscert"><a class="header" href="#notifierstomptlscert"><code>$.notifier.stomp.tls.cert</code></a></h4>
<p>string value</p>
<p>The filesystem path where a tls certificate can be read.</p>
<h4 id="notifierstomptlskey"><a class="header" href="#notifierstomptlskey"><code>$.notifier.stomp.tls.key</code></a></h4>
<p>string value</p>
<p>The filesystem path where a tls private key can be read.</p>
<h4 id="notifierstompuser"><a class="header" href="#notifierstompuser"><code>$.notifier.stomp.user</code></a></h4>
<p>Configures login details for the STOMP broker.</p>
<h4 id="notifierstompuserlogin"><a class="header" href="#notifierstompuserlogin"><code>$.notifier.stomp.user.login</code></a></h4>
<p>string value</p>
<p>The STOMP login to connect with.</p>
<h4 id="notifierstompuserpasscode"><a class="header" href="#notifierstompuserpasscode"><code>$.notifier.stomp.user.passcode</code></a></h4>
<p>string value</p>
<p>The STOMP passcode to connect with.</p>
<h3 id="auth"><a class="header" href="#auth"><code>$.auth</code></a></h3>
<p>Defines ClairV4’s external and intra-service JWT based authentication.</p>
<p>If multiple auth mechanisms are defined, Clair will pick one. Currently, there
are not multiple mechanisms.</p>
<h3 id="authpsk"><a class="header" href="#authpsk"><code>$.auth.psk</code></a></h3>
<p>Defines preshared key authentication.</p>
<h4 id="authpskkey"><a class="header" href="#authpskkey"><code>$.auth.psk.key</code></a></h4>
<p>a string value</p>
<p>A shared base64 encoded key distributed between all parties signing and
verifying JWTs.</p>
<h4 id="authpskiss"><a class="header" href="#authpskiss"><code>$.auth.psk.iss</code></a></h4>
<p>a list of string value</p>
<p>A list of JWT issuers to verify. An empty list will accept any issuer in a
JWT claim.</p>
<h3 id="trace"><a class="header" href="#trace"><code>$.trace</code></a></h3>
<p>Defines distributed tracing configuration based on OpenTelemetry.</p>
<h4 id="tracename"><a class="header" href="#tracename"><code>$.trace.name</code></a></h4>
<p>Which submission format to use, one of:</p>
<ul>
<li>jaeger</li>
<li>otlp</li>
<li>sentry</li>
</ul>
<h4 id="traceprobability"><a class="header" href="#traceprobability"><code>$.trace.probability</code></a></h4>
<p>a float value</p>
<p>The probability a trace will occur.</p>
<h3 id="tracejaeger"><a class="header" href="#tracejaeger"><code>$.trace.jaeger</code></a></h3>
<p>Defines values for Jaeger tracing.</p>
<p><em><strong>NOTE</strong></em>: Jaeger has deprecated using the <code>jaeger</code> protocol and encouraging users to migrate to OTLP,
which Jaeger can ingest natively.</p>
<h4 id="tracejaegeragent"><a class="header" href="#tracejaegeragent"><code>$.trace.jaeger.agent</code></a></h4>
<p>Defines values for configuring delivery to a Jaeger agent.</p>
<h4 id="tracejaegeragentendpoint"><a class="header" href="#tracejaegeragentendpoint"><code>$.trace.jaeger.agent.endpoint</code></a></h4>
<p>a string value</p>
<p>An address in <code>&lt;host&gt;:&lt;post&gt;</code> syntax where traces can be submitted.</p>
<h4 id="tracejaegercollector"><a class="header" href="#tracejaegercollector"><code>$.trace.jaeger.collector</code></a></h4>
<p>Defines values for configuring delivery to a Jaeger collector.</p>
<h4 id="tracejaegercollectorendpoint"><a class="header" href="#tracejaegercollectorendpoint"><code>$.trace.jaeger.collector.endpoint</code></a></h4>
<p>a string value</p>
<p>An address in <code>&lt;host&gt;:&lt;post&gt;</code> syntax where traces can be submitted.</p>
<h4 id="tracejaegercollectorusername"><a class="header" href="#tracejaegercollectorusername"><code>$.trace.jaeger.collector.username</code></a></h4>
<p>a string value</p>
<h4 id="tracejaegercollectorpassword"><a class="header" href="#tracejaegercollectorpassword"><code>$.trace.jaeger.collector.password</code></a></h4>
<p>a string value</p>
<h4 id="tracejaegerservice_name"><a class="header" href="#tracejaegerservice_name"><code>$.trace.jaeger.service_name</code></a></h4>
<p>a string value</p>
<h4 id="tracejaegertags"><a class="header" href="#tracejaegertags"><code>$.trace.jaeger.tags</code></a></h4>
<p>a mapping of a string to a string</p>
<h4 id="tracejaegerbuffer_max"><a class="header" href="#tracejaegerbuffer_max"><code>$.trace.jaeger.buffer_max</code></a></h4>
<p>an integer value</p>
<h3 id="traceotlp"><a class="header" href="#traceotlp"><code>$.trace.otlp</code></a></h3>
<p>Configuration for OTLP traces.</p>
<p>Only one of the <code>http</code> or <code>grpc</code> keys should be provided.</p>
<h4 id="traceotlphttp"><a class="header" href="#traceotlphttp"><code>$.trace.otlp.http</code></a></h4>
<p>Configuration for OTLP traces submitted by HTTP.</p>
<h5 id="traceotlphttpurl_path"><a class="header" href="#traceotlphttpurl_path"><code>$.trace.otlp.http.url_path</code></a></h5>
<p>Request path to use for submissions.
Defaults to <code>/v1/traces</code>.</p>
<h5 id="traceotlphttpcompression"><a class="header" href="#traceotlphttpcompression"><code>$.trace.otlp.http.compression</code></a></h5>
<p>Compression for payloads.
One of:</p>
<ul>
<li>gzip</li>
<li>none</li>
</ul>
<h5 id="traceotlphttpendpoint"><a class="header" href="#traceotlphttpendpoint"><code>$.trace.otlp.http.endpoint</code></a></h5>
<p><code>Host:port</code> for submission. Defaults to <code>localhost:4318</code>.</p>
<h5 id="traceotlphttpheaders"><a class="header" href="#traceotlphttpheaders"><code>$.trace.otlp.http.headers</code></a></h5>
<p>Key-value pairs of additional headers for submissions.</p>
<h5 id="traceotlphttpinsecure"><a class="header" href="#traceotlphttpinsecure"><code>$.trace.otlp.http.insecure</code></a></h5>
<p>Use HTTP instead of HTTPS.</p>
<h5 id="traceotlphttptimeout"><a class="header" href="#traceotlphttptimeout"><code>$.trace.otlp.http.timeout</code></a></h5>
<p>Maximum of of time for a trace submission.</p>
<h5 id="traceotlphttpclient_tlscert"><a class="header" href="#traceotlphttpclient_tlscert"><code>$.trace.otlp.http.client_tls.cert</code></a></h5>
<p>Client certificate for connection.</p>
<h5 id="traceotlphttpclient_tlskey"><a class="header" href="#traceotlphttpclient_tlskey"><code>$.trace.otlp.http.client_tls.key</code></a></h5>
<p>Key for the certificate specified in <code>cert</code>.</p>
<h4 id="traceotlpgrpc"><a class="header" href="#traceotlpgrpc"><code>$.trace.otlp.grpc</code></a></h4>
<p>Configuration for OTLP traces submitted by gRPC.</p>
<h5 id="traceotlpgrpcreconnect"><a class="header" href="#traceotlpgrpcreconnect"><code>$.trace.otlp.grpc.reconnect</code></a></h5>
<p>Sets the minimum time between connection attempts.</p>
<h5 id="traceotlpgrpcservice_config"><a class="header" href="#traceotlpgrpcservice_config"><code>$.trace.otlp.grpc.service_config</code></a></h5>
<p>A string containing a JSON-format gRPC service config.</p>
<h5 id="traceotlpgrpccompression"><a class="header" href="#traceotlpgrpccompression"><code>$.trace.otlp.grpc.compression</code></a></h5>
<p>Compression for payloads.
One of:</p>
<ul>
<li>gzip</li>
<li>none</li>
</ul>
<h5 id="traceotlpgrpcendpoint"><a class="header" href="#traceotlpgrpcendpoint"><code>$.trace.otlp.grpc.endpoint</code></a></h5>
<p><code>Host:port</code> for submission. Defaults to <code>localhost:4317</code>.</p>
<h5 id="traceotlpgrpcheaders"><a class="header" href="#traceotlpgrpcheaders"><code>$.trace.otlp.grpc.headers</code></a></h5>
<p>Key-value pairs of additional headers for submissions.</p>
<h5 id="traceotlpgrpcinsecure"><a class="header" href="#traceotlpgrpcinsecure"><code>$.trace.otlp.grpc.insecure</code></a></h5>
<p>Do not verify the server certificate.</p>
<h5 id="traceotlpgrpctimeout"><a class="header" href="#traceotlpgrpctimeout"><code>$.trace.otlp.grpc.timeout</code></a></h5>
<p>Maximum of of time for a trace submission.</p>
<h5 id="traceotlpgrpcclient_tlscert"><a class="header" href="#traceotlpgrpcclient_tlscert"><code>$.trace.otlp.grpc.client_tls.cert</code></a></h5>
<p>Client certificate for connection.</p>
<h5 id="traceotlpgrpcclient_tlskey"><a class="header" href="#traceotlpgrpcclient_tlskey"><code>$.trace.otlp.grpc.client_tls.key</code></a></h5>
<p>Key for the certificate specified in <code>cert</code>.</p>
<h3 id="tracesentry"><a class="header" href="#tracesentry"><code>$.trace.sentry</code></a></h3>
<p>Configuration for submitting traces to Sentry.</p>
<p>This is done via OpenTelemetry instrumentation, so may not provide identical
results compared to other tracing backends or native Sentry instrumentation.</p>
<p>There’s no integration for error submission.
This means that alternative implementations of the Sentry API that do not support submitting traces (such as <a href="https://glitchtip.com/">GlitchTip</a>) are not usable.</p>
<h4 id="tracesentrydsn"><a class="header" href="#tracesentrydsn"><code>$.trace.sentry.dsn</code></a></h4>
<p>Sentry DSN to use.
See also <a href="https://pkg.go.dev/github.com/getsentry/sentry-go#ClientOptions"><code>sentry-go.ClientOptions</code></a>.</p>
<h4 id="tracesentryenvironment"><a class="header" href="#tracesentryenvironment"><code>$.trace.sentry.environment</code></a></h4>
<p>Sentry environment to use.
See also <a href="https://pkg.go.dev/github.com/getsentry/sentry-go#ClientOptions"><code>sentry-go.ClientOptions</code></a>.</p>
<h3 id="metrics"><a class="header" href="#metrics"><code>$.metrics</code></a></h3>
<p>Defines distributed tracing configuration based on OpenTelemetry.</p>
<h4 id="metricsname"><a class="header" href="#metricsname"><code>$.metrics.name</code></a></h4>
<p>a string value</p>
<h3 id="metricsprometheus"><a class="header" href="#metricsprometheus"><code>$.metrics.prometheus</code></a></h3>
<p>Configuration for a prometheus metrics exporter.</p>
<h4 id="metricsprometheusendpoint"><a class="header" href="#metricsprometheusendpoint"><code>$.metrics.prometheus.endpoint</code></a></h4>
<p>a string value</p>
<p>Defines the path where metrics will be served.</p>
<h3 id="metricsotlp"><a class="header" href="#metricsotlp"><code>$.metrics.otlp</code></a></h3>
<p>Configuration for OTLP metrics.</p>
<p>Only one of the <code>http</code> or <code>grpc</code> keys should be provided.</p>
<h4 id="metricsotlphttp"><a class="header" href="#metricsotlphttp"><code>$.metrics.otlp.http</code></a></h4>
<p>Configuration for OTLP metrics submitted by HTTP.</p>
<h5 id="metricsotlphttpurl_path"><a class="header" href="#metricsotlphttpurl_path"><code>$.metrics.otlp.http.url_path</code></a></h5>
<p>Request path to use for submissions.
Defaults to <code>/v1/metrics</code>.</p>
<h5 id="metricsotlphttpcompression"><a class="header" href="#metricsotlphttpcompression"><code>$.metrics.otlp.http.compression</code></a></h5>
<p>Compression for payloads.
One of:</p>
<ul>
<li>gzip</li>
<li>none</li>
</ul>
<h5 id="metricsotlphttpendpoint"><a class="header" href="#metricsotlphttpendpoint"><code>$.metrics.otlp.http.endpoint</code></a></h5>
<p><code>Host:port</code> for submission. Defaults to <code>localhost:4318</code>.</p>
<h5 id="metricsotlphttpheaders"><a class="header" href="#metricsotlphttpheaders"><code>$.metrics.otlp.http.headers</code></a></h5>
<p>Key-value pairs of additional headers for submissions.</p>
<h5 id="metricsotlphttpinsecure"><a class="header" href="#metricsotlphttpinsecure"><code>$.metrics.otlp.http.insecure</code></a></h5>
<p>Use HTTP instead of HTTPS.</p>
<h5 id="metricsotlphttptimeout"><a class="header" href="#metricsotlphttptimeout"><code>$.metrics.otlp.http.timeout</code></a></h5>
<p>Maximum of of time for a metrics submission.</p>
<h5 id="metricsotlphttpclient_tlscert"><a class="header" href="#metricsotlphttpclient_tlscert"><code>$.metrics.otlp.http.client_tls.cert</code></a></h5>
<p>Client certificate for connection.</p>
<h5 id="metricsotlphttpclient_tlskey"><a class="header" href="#metricsotlphttpclient_tlskey"><code>$.metrics.otlp.http.client_tls.key</code></a></h5>
<p>Key for the certificate specified in <code>cert</code>.</p>
<h4 id="metricsotlpgrpc"><a class="header" href="#metricsotlpgrpc"><code>$.metrics.otlp.grpc</code></a></h4>
<p>Configuration for OTLP metrics submitted by gRPC.</p>
<h5 id="metricsotlpgrpcreconnect"><a class="header" href="#metricsotlpgrpcreconnect"><code>$.metrics.otlp.grpc.reconnect</code></a></h5>
<p>Sets the minimum time between connection attempts.</p>
<h5 id="metricsotlpgrpcservice_config"><a class="header" href="#metricsotlpgrpcservice_config"><code>$.metrics.otlp.grpc.service_config</code></a></h5>
<p>A string containing a JSON-format gRPC service config.</p>
<h5 id="metricsotlpgrpccompression"><a class="header" href="#metricsotlpgrpccompression"><code>$.metrics.otlp.grpc.compression</code></a></h5>
<p>Compression for payloads.
One of:</p>
<ul>
<li>gzip</li>
<li>none</li>
</ul>
<h5 id="metricsotlpgrpcendpoint"><a class="header" href="#metricsotlpgrpcendpoint"><code>$.metrics.otlp.grpc.endpoint</code></a></h5>
<p><code>Host:port</code> for submission. Defaults to <code>localhost:4318</code>.</p>
<h5 id="metricsotlpgrpcheaders"><a class="header" href="#metricsotlpgrpcheaders"><code>$.metrics.otlp.grpc.headers</code></a></h5>
<p>Key-value pairs of additional headers for submissions.</p>
<h5 id="metricsotlpgrpcinsecure"><a class="header" href="#metricsotlpgrpcinsecure"><code>$.metrics.otlp.grpc.insecure</code></a></h5>
<p>Use HTTP instead of HTTPS.</p>
<h5 id="metricsotlpgrpctimeout"><a class="header" href="#metricsotlpgrpctimeout"><code>$.metrics.otlp.grpc.timeout</code></a></h5>
<p>Maximum of of time for a metrics submission.</p>
<h5 id="metricsotlpgrpcclient_tlscert"><a class="header" href="#metricsotlpgrpcclient_tlscert"><code>$.metrics.otlp.grpc.client_tls.cert</code></a></h5>
<p>Client certificate for connection.</p>
<h5 id="metricsotlpgrpcclient_tlskey"><a class="header" href="#metricsotlpgrpcclient_tlskey"><code>$.metrics.otlp.grpc.client_tls.key</code></a></h5>
<p>Key for the certificate specified in <code>cert</code>.</p>
<hr>
<hr>
<ol class="footnote-definition">
<li id="footnote-1">
<p>Support added in version <code>4.7.0</code>. <a href="#fr-1-1">↩</a> <a href="#fr-1-2">↩2</a></p>
</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../reference/clairctl.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="../reference/indexer.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../reference/clairctl.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="../reference/indexer.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr-ef4e11c1.min.js"></script>
        <script src="../mark-09e88c2c.min.js"></script>
        <script src="../searcher-c2a407aa.js"></script>

        <script src="../clipboard-1626706a.min.js"></script>
        <script src="../highlight-abc7f01d.js"></script>
        <script src="../book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
